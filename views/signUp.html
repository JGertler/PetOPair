<!DOCTYPE html>
<html>
<head>
  <!--Import Google Icon Font-->
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="/css/materialize.min.css"  media="screen,projection"/>
  <link type="text/css" rel="stylesheet" href="/css/style.css">
  <!-- google font -->
  <link href="https://fonts.googleapis.com/css?family=Gloria+Hallelujah" rel="stylesheet">
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="/js/materialize.js"></script>
  <script type="text/javascript" src="/js/app.js"></script>
</head>


<!-- navbar -->

<ul id="slide-out" class="side-nav" style="transform: translateX(0px);">
  <li><div class="user-view">
    <div class="background">
      <img src="">
    </div>
    <a href="#!user"><img class="circle" src=""></a>
    <a href="#!name"><span class="green-text name">Susie Smith</span></a>
    <a href="#!email"><span class="green-text email">meowcatmeow@gmail.com</span></a>
  </div></li>
  <li><a href="#!"><i class="material-icons">account_circle</i>My Pet Profile</a></li>
  <li><div class="divider"></div></li>
  <li><a class="subheader">Activity</a></li>
  <li><a href="#!">Notifications</a></li>
  <li><a class="waves-effect" href="#!">My Neighborhood Bulletin</a></li>
  <li><a class="waves-effect" href="/sugar">My Cups of Sugar</a></li>
</ul>

<!-- end navbar -->

<body>
  <nav class="lighten-1" role="navigation">
    <div class="nav-wrapper" id="navbar">
      <button data-activates="slide-out" class="button-toggle-profile waves-effect waves-light btn " id="button-toggle-profile">Profile</button>
      <a id="logo-container" href="/" class="brand-logo"><img src="/media/Petopair.png" style="width: 300px; position: relative; bottom: 43px"></a>
      <!-- Dropdown Structure -->


      <ul id="dropdown1" class="dropdown-content">
        <li><a href="badges.html">About</a></li>
        <li class="divider"></li>
        <li><a href="#!">Contact</a></li>
        <li class="divider"></li>
        <li><a href="#!">Disclaimer</a></li>
      </ul>

      <ul class="right hide-on-med-and-down">
        <li><a href="badges.html">About</a></li><li><span>|</span></li>
        <li><a href="#!">Contact</a>|</li><li><span>|</span></li>
        <li><a href="#!">Disclaimer</a></li>
        <!-- Dropdown Trigger -->

        <!-- modal goes here -->
        <button type="button" class="btn-large waves-effect waves-light" data-toggle="modal" data-target="#myModal">Login</button>
        <!-- Modal Structure -->
        <div id="modal" class="modal open bottom-sheet">
          <div class="modal-content">
            <h4>Modal Header</h4>
            <p>A bunch of text</p>
          </div>
          <div class="modal-footer green">
            <a href="#!" class="modal-action modal-close waves-effect btn-flat">Close</a>
          </div>
        </div>
        <!-- modal ends here -->
      </li>
    </ul>
    <!--Added a place for the menu items to collapse into on smaller screens -->
    <ul class="right show-on-med-and-down hide-on-large-only  ">
      <li><a class="dropdown-button" href="#!" data-activates="dropdown1"><i class="material-icons right">menu</i></a></li>
    </ul>
  </div>
</nav>

<!-- end nav -->


<!--
  <a href="#" data-activates="nav-mobile" class="button-collapse"><i class="material-icons">menu</i></a> -->


<div class="container">

    <div class="section carouselSection" style="font-family: 'Gloria Hallelujah', cursive;">

<div class="carousel carousel-slider center" data-indicators="true" style="height: 600px">
    <form ref="uploadForm" action="/uploadForm" method="post" enctype="multipart/form-data" id="addressPopulate">
      <div class="carousel-item" style="background-color: #edfadc; padding: 30px;" href="#one!">
        <div id="error-div"></div>
          <div class="row">
            <div class="input-field col s6">
              <input id="first_name" type="text" class="validate">
              <label for="first_name">First Name</label>
            </div>
            <div class="input-field col s6">
              <input id="last_name" type="text" class="validate">
              <label for="last_name">Last Name</label>
            </div>
          </div>
          <div class="row">
          <div class="input-field col s12">
            <input id="username" type="text" class="validate">
            <label for="username">Username</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <input id="password" type="password" class="validate">
            <label for="password">Password</label>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s12">
            <input id="email" type="email" class="validate">
            <label for="email">Email</label>
          </div>
        </div>
      </div> <!-- end carousel slide 1 -->
        <div class="carousel-item" style="background-color: #faf8dc; padding: 30px;" href="#two!">
        <!-- Google Autopopulate html -->
        <div class="row" id="address">
          <div class="col s12" id="locationField">
            <input id="autocomplete" placeholder="Enter Your Address Here" onFocus="geolocate()" type="text"></input>
          </div>
        </div>
        <div class="row">
          <div class="col s6">
            <p class="label" style="color: purple;">Street address</p>
            <p class="slimField"><input class="field" id="street_number" disabled="true"></input>
            </p>
            <p class="wideField" colspan="2"><input class="field" id="route" disabled="true"></input>
            </p>
          </div>
          <div class="col s4">
            <p class="label" style="color: purple;">City</p>
            <p class="wideField" colspan="3"><input class="field" id="locality" disabled="true"></input>
            </p>
          </div>
        </div>
        <div class="row">
          <div class="col s3">
            <p class="label" style="color: purple;">State</p>
            <p class="slimField"><input class="field" id="administrative_area_level_1" disabled="true"></input>
            </p>
          </div>
          <div class="col s6">
            <p class="label" style="color: purple;">Zip code</p>
            <p class="wideField"><input class="field" id="postal_code" disabled="true"></input>
            </p>
          </div>
          <div class="col s3">
            <p class="label" style="color: purple;">Country</p>
            <p class="wideField" colspan="3"><input class="field" id="country" disabled="true"></input>
            </p>
          </div>
        </div>
        <button class="btn waves-effect waves-light" id="grabdata" type="submit" name="action">Submit
         <i class="material-icons right">send</i>
        </button>
          </div> <!-- end carousel slide 2 -->
          <div class="carousel-item" style="background-color: #dcdefa; padding: 30px;" href="#three!">
            <div class="row" id="slideOne">
              <div class="col s6">
                <p> We recommend posting a picture of you smiling. You will upload pictures of your pets separately. </p>
              </div>
              <div class="col s6">
                <input type="file" name="uploadedPic" accept="image/*" onchange="readURL(this);"/>
                <img class="materialboxed userPic" id="blah" src="#" alt="User img" width="200" height="200"/>
              </div>
            </div> <!-- end row -->
          </div> <!-- end carousel slide 3 -->
          <div class="carousel-item" style="background-color: #faf8dc; padding: 30px;" href="#four!">
                    <!-- does user have pets? -->
        <div class="row">
          <div col s6>
            <p> So, introduce your pets! </p>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s8">
            <input id="pet_name" type="text" class="validate">
            <label for="pet_name">Pet Name</label>
          </div>
        </div>
        <div class="row">
            <div class="input-field col s5 petTypes1" style="color: black; width: 300px;">
              <select multiple>
                <option value="" disabled selected>schweetie</option>
                <option value="1">Cat</option>
                <option value="2">Dog</option>
                <option value="3">Rabbit</option>
                <option value="4">Ferret</option>
                <option value="5">Bird</option>
                <option value="6">Rodent</option>
                <option value="7">Reptile</option>
                <option value="8">Fish</option>
              </select>
              <label>Pet Type</label>
            </div>
        </div>
        <div class="row">
          <div id="morePets">
            <a class="waves-effect waves-light btn" id="addPet">Add another Pet</a>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s5 petTypes" style="color: black; width: 300px;">
          <!-- this will fill dynamically -->
          </div>
        </div>
      </div> <!-- end carousel slide 4 -->
      <div class="carousel-item lastSlide" style="background-color: #edfadc;" href="#five!">
        <div class="row">
          <div class="col s8 offset-s2">
            <h5 style="font-family: 'Gloria Hallelujah', cursive;"> On average, how much royal treatment do your pet(s) require? </h5>
            <p style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;">For example, a pure commoner hardly begs for food, has all the chill, rarely makes a mess, and doesn't have any strict regimens. Commoners are commonly adorable. A pet requiring the ultimate royal treatment will likely make a mess if left alone too long, makes a lot of noise, requires medicine of sorts, and has special regimens. These pets are royalty in their own right, but you get pretty embarassed by the list of things your petsitter has to be aware of.</p>
          </div>
        </div>
        <div class="row">
          <div class="input-field col s10 offset-s1">
            <label class="treatment" for="treatment">
            <br>
              <span class="commoner">Commoner</span>
              <span class="royal">Royal Treatment</span>
            </label>
              <p class="range-field">
                <input type="range" id="treatment" min="0" max="10">
              </p>
          </div>
        </div>

        <div class="row">
          <div class="col 1 offset-s8">
            <div class="waves-effect waves-light btn" id="formNext" style="background-color:blue">
            <!-- this button will post to aws -->
            <input type="submit" value="Submit"/>
            </div>
          </div>
        </div>
        </div> <!--end carousel slide 5-->

    </form>
</div>



        <!-- end container and section -->
      </div>
    </div>





    <footer class="page-footer">
      <div class="container">
        <div class="row">
          <div class="col l6 s12">
            <h5 class="white-text">About Us</h5>
            <p class="grey-text text-lighten-4">Pet OPair is made up of five determined coding bootcamp students: Jessica Gertler, Mayat Smolnik, Julie Braun, Jennifer King, and Amber Orenstein</p>
          </div>
          <div class="col l3 s12">
            <h5 class="white-text">Adopt!</h5>
            <ul>
              <li><a class="white-text" href="http://www.rmfr-colorado.org">RMFR</a></li>
              <li><a class="white-text" href="http://www.ddfl.org">Dumb Friends League</a></li>
              <li><a class="white-text" href="https://maxfund.org">MaxFund</a></li>
            </ul>
          </div>
          <div class="col l3 s12">
            <h5 class="white-text">Contact</h5>
            <ul>
              <li><a class="white-text" href="#!">Email</a></li>
              <li><a class="white-text" href="#!">Phone</a></li>
              <li><a class="white-text" href="#!">Leasing Office</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="footer-copyright">
        <div class="container">
          Founded in <a class="orange-text text-lighten-3" href="https://github.com/JGertler">Denver, CO</a>
        </div>
      </div>
    </footer>



    <!--model start-->
    <div class="container">

      <div class="modal fade" id="myModal" role="dialog">
        <div class="modal-dialog">

          <div class="wrapper">
            <form class="form-signin">
              <button type="button" class="close" data-dismiss="modal">&times;</button>
              <h2 class="form-signin-heading">Please login</h2>
              <div id="error-div"></div>
              <input type="text" class="form-control" name="username" placeholder="Username" id="login-name" required="" autofocus="" />
              <input type="password" class="form-control" name="password" id="login-password" placeholder="Password" required="" />
              <label class="checkbox">
        <input type="checkbox" value="remember-me" id="rememberMe" name="rememberMe"> Remember me
      </label>
              <button class="btn btn-lg btn-primary btn-block" type="submit" id="login-btn">Login</button>
            </form>
            <br>
            <p>Need an account? <a href="/signup">Signup</a></p>
            <p>Or go <a href="/">home</a>.</p>
          </div>

        </div>
      </div>

    </div>

    <!--model end-->

  </body>
  </html>



<script>

$('.carousel.carousel-slider').carousel({fullWidth: true});

// this allows picture uploads to display on page 
function readURL(input) {
  if (input.files && input.files[0]) {
    var reader = new FileReader();
    reader.onload = function (e) {
      document.getElementById('blah').src =  e.target.result;
    }
    reader.readAsDataURL(input.files[0]);
  }
}
//this allows user to add more pets with pet type in the form

$("#addPet").click(function () {
  
  $("#morePets").prepend("<input id='pet_name' type='text' class='validate col s8' placeholder='Pet Name'><label for='pet_name'></label> <div class='input-field col s5 petTypes' style='color: black; width: 300px;'> <select multiple> <option value=''disabled selected></option> <option value='1'>Cat</option> <option value='2'>Dog</option> <option value='3'>Rabbit</option> <option value='4'>Ferret</option> <option value='5'>Bird</option> <option value='6'>Rodent</option> <option value='7'>Reptile</option> <option value='8'>Fish</option> </select> <label>Pet Type</label></div>");
  $("select").material_select();
  
  $(".carousel").css({"height": "+=100px"});
});


  //function which grab the user's input data from the sign up form and puts it into an object to route to the table
  var userObject;

  function grabData(event) {
    event.preventDefault();
    var address = $("#autocomplete").val().trim();
    var queryUrl = "https://maps.googleapis.com/maps/api/geocode/json?address=" + address + "&key=AIzaSyBaw-4l7qS4b_L7kXhuHViE2smEu1k34Dw";



    var first_name = $("#first_name").val().trim(),
      last_name = $("#last_name").val().trim(),
      username = $("#username").val().trim(),
      password = $("#password").val().trim(),
      email = $("#email").val().trim(),
      //picture_url = $("#picture_url").val().trim(),
      autocomplete = $("#autocomplete").val().trim(),
      street_number = $("#street_number").val().trim(),
      route = $("#route").val().trim(),
      locality = $("#locality").val().trim(),
      administrative_area_level_1 = $("#administrative_area_level_1").val().trim(),
      postal_code = $("#postal_code").val().trim(),
      country = $("#country").val().trim();


    var info = {
      first_name: first_name,
      last_name: last_name,
      cups_of_sugar: 0,
      //picture_url:picture_url,
      username: username,
      password: password,
      email: email,
      autocomplete: autocomplete,
      street_number: street_number,
      route: route,
      locality: locality,
      administrative_area_level_1: administrative_area_level_1,
      postal_code: postal_code,
      country: country

    }

    $.post("/put_newuser_in_db", info, function(userObject) {
      //  console.log(userObject);
      window.location.href = '/profile';
    }).catch(function(data) {
      //  window.location.href='/';
      //JSON.stringify(data);
      var message = $('<p>').text("Username is Taken");
      message.css("color", "red");
      $("#error-div").empty();
      $("#error-div").append(message);
      //console.log(data);
    })
  }

  $("#picture_upload").on('click', loadPic);
  $("#grabdata").on("click", grabData);

  function loadPic(){
    var profile_url=$("#profile_url").val.trim()
    $.post("/upload", profile_url, function() {
      //  console.log(userObject);
      window.location.href = '/';
    }).catch(function(data) {
      //  window.location.href='/';
      //JSON.stringify(data);
      var message = $('<p>').text("Error in picture upload");
      message.css("color", "red");
      $("#error-div2").empty();
      $("#error-div2").append(message);
      //console.log(data);
    })
  }

  //ends grabData function


  // This displays an address form, using the autocomplete feature
  // of the Google Places API to help users fill in the information.
  // This example requires the Places library. Include the libraries=places
  // parameter when you first load the API. For example:
  // <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places">
  var placeSearch, autocomplete;
  var componentForm = {
    street_number: 'short_name',
    route: 'long_name',
    locality: 'long_name',
    administrative_area_level_1: 'short_name',
    country: 'long_name',
    postal_code: 'short_name'
  };

  function initAutocomplete() {
    // Create the autocomplete object, restricting the search to geographical
    // location types.
    autocomplete = new google.maps.places.Autocomplete(
      /** @type {!HTMLInputElement} */
      (document.getElementById('autocomplete')), {
        types: ['geocode']
      });
    // When the user selects an address from the dropdown, populate the address
    // fields in the form.
    autocomplete.addListener('place_changed', fillInAddress);
  }

  function fillInAddress() {
    // Get the place details from the autocomplete object.
    var place = autocomplete.getPlace();
    for (var component in componentForm) {
      document.getElementById(component).value = '';
      document.getElementById(component).disabled = false;
    }
    // Get each component of the address from the place details
    // and fill the corresponding field on the form.
    for (var i = 0; i < place.address_components.length; i++) {
      var addressType = place.address_components[i].types[0];
      if (componentForm[addressType]) {
        var val = place.address_components[i][componentForm[addressType]];
        document.getElementById(addressType).value = val;
      }
    }
  }
  // Bias the autocomplete object to the user's geographical location,
  // as supplied by the browser's 'navigator.geolocation' object.
  function geolocate() {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(function(position) {
        var geolocation = {
          lat: position.coords.latitude,

          lng: position.coords.longitude
        };

        var circle = new google.maps.Circle({
          center: geolocation,
          radius: position.coords.accuracy
        });
        autocomplete.setBounds(circle.getBounds());
      });
    }
  }


  //});
</script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA0Zeq_ONgdAnTqmMn9n4sD94vTut2WIeY&libraries=places&callback=initAutocomplete" async defer></script>







